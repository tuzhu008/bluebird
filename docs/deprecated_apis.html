<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
 <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='http://fonts.googleapis.com/css?family=Raleway:400,300,200,700,500,100,800,600,900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" />
    <title>弃用的 API | bluebird</title>
    <meta name="description" content="Bluebird is a fully featured JavaScript promises library with unmatched performance.">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="/bluebird_cn/css/mono-blue.css" type='text/css' />
    <link rel="stylesheet" href="/bluebird_cn/css/hover-min.css" media="all">
    <link rel="stylesheet" href="/bluebird_cn/css/main.css">
    <link rel="canonical" href="https://tuzhu008.github.io/bluebird_cn/docs/deprecated_apis.html">
    <link rel="icon" href="/bluebird_cn/img/favicon.png" type="image/png" />
  </head>

  <body>

    <nav class="navbar" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a href="/" class="title">
                    <img src="/bluebird_cn/img/libbblog_v3.png" class="hidden-xs" alt="bluebird logo" />

                    <span class="tagline">bluebird</span>
                </a>
            </div>
            <div id="navbar" class="navbar-collapse navbar-bluebird navbar-right collapse">
                <ul class="nav navbar-nav bb-nav">
                    

                    <li class=""><a href="/bluebird_cn/docs/api-reference.html">API</a></li>
                    <li class="active"><a href="/bluebird_cn/docs/getting-started.html">文档</a></li>
                    <li class=""><a href="/bluebird_cn/docs/support.html">支持</a></li>
                    <li class=""><a href="/bluebird_cn/docs/install.html">安装</a></li>
                    <li><a href="https://github.com/petkaantonov/bluebird/">Github</a></li>
                </ul>
            </div><!--/.navbar-collapse -->
        </div>
    </nav>

   <div class="container">
      <div class="row">
        <div class="col-sm-3">
            <ul class="nav left-nav">
                <li><a href="/bluebird_cn/docs/getting-started.html">开始</a></li>
                <li><a href="/bluebird_cn/docs/features.html">特性</a></li>
                <li><a href="/bluebird_cn/docs/changelog.html">更新日志</a></li>
                <li><a href="/bluebird_cn/docs/api-reference.html"><strong>API 参考</strong></a></li>
                <li><a href="/bluebird_cn/docs/new-in-bluebird-3.html"><strong>New in 3.0</strong></a></li>
                <li><a href="/bluebird_cn/docs/warning-explanations.html">警告说明</a></li>
                <li><a href="/bluebird_cn/docs/error-explanations.html">错误说明</a></li>
                <li><a href="/bluebird_cn/docs/contribute.html">贡献</a></li>
                <li><a href="/bluebird_cn/docs/benchmarks.html">Benchmarks</a></li>
                <li><a href="/bluebird_cn/docs/deprecated-apis.html">弃用的 API</a></li>
                <li><a href="/bluebird_cn/docs/download-api-reference.html">下载 API 参考</a></li>
                <li><hr></li>
                <li>Why?
                    <ul class="nav nav-child">
                        <li><a href="/bluebird_cn/docs/why-promises.html">Why Promises?</a></li>
                        <li><a href="/bluebird_cn/docs/why-bluebird.html">Why bluebird?</a></li>
                        <li><a href="/bluebird_cn/docs/why-performance.html">Why Performance?</a></li>
                        <li><a href="/bluebird_cn/docs/what-about-generators.html">What About Generators?</a></li>
                    </ul>
                </li>
                <li><hr></li>
                <li>
                    教程
                    <ul class="nav nav-child">
                        <li><a href="/bluebird_cn/docs/async-dialogs.html">Async Dialogs</a></li>
                    </ul>
                </li>
                <li><hr></li>
                <li>
                    指南
                    <ul class="nav nav-child">
                        <li><a href="/bluebird_cn/docs/beginners-guide.html">初学者指南</a></li>
                        <li><a href="/bluebird_cn/docs/anti-patterns.html">Anti-patterns</a></li>
                        <li><a href="/bluebird_cn/docs/working-with-callbacks.html">使用回调</a></li>
                        <li><a href="/bluebird_cn/docs/coming-from-other-languages.html">来自其他语言</a></li>
                        <li><a href="/bluebird_cn/docs/coming-from-other-libraries.html">来自其他库</a></li>
                    </ul>
                </li>
                <li><hr></li>
                <li>
                    <div class="supporters">
                        <div class="reaktor supporter">
                            <a href="https://reaktor.com">
                                <img src="/bluebird_cn/img/supportlogo.png" alt="Supported by reaktor" title="Supported by Reaktor">
                            </a>
                        </div>
                    </div>
                </li>

            </ul>
        </div>
        <div class="col-sm-9">
            
            <div class="post-info">
                <a href="https://github.com/tuzhu008/bluebird_cn/edit/master/docs/docs/deprecated_apis.md">
                    <i class="fa fa-edit"></i>
                    编辑此页</a>
                <br>
                <i>更新于 02 Jan 2018</i>
            </div>
            <div class="clearfix"></div>
            
            <div class="post">

  <header class="post-header">
    <h1 class="post-title">弃用的 API</h1>
  </header>

  <article class="post-content">
    <p>This file contains documentation for APIs that are no longer supported by Bluebird.
These APIs still work in Bluebird but will be removed at a future version of the library.</p>

<p>For every use case that the methods below solve there exists a better alternative in <a href='./API.md' title=''>the API reference</a>.</p>

<ul>
<li><p><a href='#progression' title=''>Progression</a></p>

<ul>
<li><a href='#.progressed' title=''><code>.progressed(Function handler)</code></a></li>
<li><a href='#.then' title=''><code>.then([Function fulfilledHandler] [, Function rejectedHandler ] [, Function progressHandler ])</code></a></li>
<li><a href='#.done' title=''><code>.done([Function fulfilledHandler] [, Function rejectedHandler ] [, Function progressHandler ])</code></a></li>
<li><a href='#.fork' title=''><code>.fork([Function fulfilledHandler] [, Function rejectedHandler ] [, Function progressHandler ])</code></a></li>
</ul></li>
<li><p><a href='#promise-resolution' title=''>Promise resolution</a></p>

<ul>
<li><a href='#.resolve' title=''><code>.resolve(dynamic value)</code></a></li>
<li><a href='#.reject' title=''><code>.reject(dynamic reason)</code></a></li>
<li><a href='#.progress' title=''><code>.progress(dynamic value)</code></a></li>
<li><a href='#.callback' title=''><code>.callback</code></a></li>
</ul></li>
</ul>
            <h2>
                <a class="header-anchor"
                    name="progression"
                    aria-hidden="true"
                    href="#progression"><i class="fa fa-link"></i></a>
                Progression
            </h2>

<p>The old progression API was meant to be used for tracking the progress of promise resolution. In retrospect, it did not work or compose very well. We understand that problem better now and the use case could be better solved without it.</p>

<p>See <a href='./API.md#progression-migration' title=''>Progression Migration</a> for migration assistance and examples of how to convert APIs that use progression to ones that do not.</p>
            <h5>
                <a class="header-anchor"
                    name="progressed"
                    aria-hidden="true"
                    href="#progressed"><i class="fa fa-link"></i></a>
                <code>.progressed(Function handler)</code> -&gt; <code>Promise</code>
            </h5>

<p>Shorthand for <a href='/bluebird_cn/docs/api/then.html'><code><code>.then(null, null, handler);</code></code></a>. Attach a progress handler that will be called if this promise is progressed. Returns a new promise chained from this promise.</p>

<p><hr></p>
            <h5>
                <a class="header-anchor"
                    name="then"
                    aria-hidden="true"
                    href="#then"><i class="fa fa-link"></i></a>
                <code>.then([Function fulfilledHandler] [, Function rejectedHandler ] [, Function progressHandler ])</code> -&gt; <code>Promise</code>
            </h5>

<p>The standard <a href='http://promises-aplus.github.io/promises-spec/' title=''>Promises/A+ <code>.then()</code></a> is still supported by Bluebird and support for it will continue indefinitely. However, the variant accepting a third <code>progressHandler</code> argument is no longer supported.</p>

<p><hr></p>
            <h5>
                <a class="header-anchor"
                    name="done"
                    aria-hidden="true"
                    href="#done"><i class="fa fa-link"></i></a>
                <code>.done([Function fulfilledHandler] [, Function rejectedHandler ] [, Function progressHandler ])</code> -&gt; <code>void</code>
            </h5>

<p>Like <a href='/bluebird_cn/docs/api/then.html'><code><code>.then()</code></code></a>, but any unhandled rejection that ends up here will be thrown as an error. Again, only the variant with the progression handler is deprecated here. <code>.done</code> is still fully supported.</p>

<p><hr></p>
            <h5>
                <a class="header-anchor"
                    name="fork"
                    aria-hidden="true"
                    href="#fork"><i class="fa fa-link"></i></a>
                <code>.fork([Function fulfilledHandler] [, Function rejectedHandler ] [, Function progressHandler ])</code> -&gt; <code>Promise</code>
            </h5>

<p>Like <a href='/bluebird_cn/docs/api/then.html'><code><code>.then()</code></code></a>, but cancellation of the returned promise or any of its descendant will not propagate cancellation to this promise or this promise&#39;s ancestors. Again, only the variant with the progression handler is deprecated here. <code>.fork</code> is still fully supported.</p>

<p><hr></p>
            <h2>
                <a class="header-anchor"
                    name="promise-resolution"
                    aria-hidden="true"
                    href="#promise-resolution"><i class="fa fa-link"></i></a>
                Promise resolution
            </h2>

<p>A <code>PromiseResolver</code> can be used to control the fate of a promise. It is like &quot;Deferred&quot; in jQuery or <code>$q.defer</code> in $q. The <code>PromiseResolver</code> objects have a <code>.promise</code> property which is a reference to the controlled promise that can be passed to clients. <code>.promise</code> of a <code>PromiseResolver</code> is not a getter function to match other implementations.</p>

<p>The methods of a <code>PromiseResolver</code> have no effect if the fate of the underlying promise is already decided (follow, reject, fulfill).</p>

<p><strong>The use of <code>Promise.defer</code> and deferred objects is discouraged - it is much more awkward and error-prone than using <code>new Promise</code>.</strong></p>

<p><hr></p>
            <h5>
                <a class="header-anchor"
                    name="resolve"
                    aria-hidden="true"
                    href="#resolve"><i class="fa fa-link"></i></a>
                <code>.resolve(dynamic value)</code> -&gt; <code>undefined</code>
            </h5>

<p>Resolve the underlying promise with <code>value</code> as the resolution value. If <code>value</code> is a thenable or a promise, the underlying promise will assume its state.</p>

<p><hr></p>
            <h5>
                <a class="header-anchor"
                    name="reject"
                    aria-hidden="true"
                    href="#reject"><i class="fa fa-link"></i></a>
                <code>.reject(dynamic reason)</code> -&gt; <code>undefined</code>
            </h5>

<p>Reject the underlying promise with <code>reason</code> as the rejection reason.</p>

<p><hr></p>
            <h5>
                <a class="header-anchor"
                    name="progress"
                    aria-hidden="true"
                    href="#progress"><i class="fa fa-link"></i></a>
                <code>.progress(dynamic value)</code> -&gt; <code>undefined</code>
            </h5>

<p>Progress the underlying promise with <code>value</code> as the progression value.</p>

<p>Example</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kd">function</span> <span class="nx">delay</span><span class="p">(</span><span class="nx">ms</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">resolver</span> <span class="o">=</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">defer</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">resolver</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="nx">now</span><span class="p">);</span>
    <span class="p">},</span> <span class="nx">ms</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">resolver</span><span class="p">.</span><span class="nx">promise</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ms</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ms</span> <span class="o">+</span> <span class="s2">&quot; ms passed&quot;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p><hr></p>

  </article>

</div>

        </div>
      </div>
  </div>
    <footer>
      <div class="container">
        <p style="text-align:center">本站翻译自 <a href='https://github.com/petkaantonov/bluebird/'>bluebird</a></p>
      </div>
    </footer>
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script src="//cdn.jsdelivr.net/bluebird/3.5.1/bluebird.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-46253177-1', 'auto');
      ga('send', 'pageview');

    </script>
</body>

</html>
